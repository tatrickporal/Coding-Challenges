{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  background: white;\\n  box-shadow: 0.1rem 0.1rem 2rem rgba(0, 0, 0, 0.25);\\n  display: block;\\n  line-height: 1.5em;\\n  overflow-x: hidden;\\n  overflow-y: auto;\\n  padding: 0.2em;\\n  position: absolute;\\n  text-decoration: none;\\n  width: 100%;\\n  z-index: 100;\\n  visibility: \", \";\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  width: 100%;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  color: #000;\\n  cursor: pointer;\\n  display: flex;\\n  list-style: none;\\n  margin: 0;\\n  margin-bottom: 0.2rem;\\n  padding: 0.3rem;\\n\\n  background-color: \", \";\\n\\n  &:hover {\\n    background-color: #ebebeb;\\n  }\\n\\n  span {\\n    flex: 1;\\n    font-size: 1.3rem;\\n    word-wrap: break-word;\\n  }\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 0;\\n  padding: 0.2rem;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  border: 0 !important;\\n  background: transparent !important;\\n  border-radius: 0;\\n  box-shadow: none;\\n  font-size: 1.3rem;\\n  line-height: normal;\\n  margin: 1px 0;\\n  outline: 0;\\n  padding: 0;\\n  position: relative;\\n  width: 100%;\\n  display: \", \";\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 0;\\n  position: relative;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar DropDownIcon = function DropDownIcon() {\n  return _react.default.createElement(\"svg\", {\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\"\n  }, _react.default.createElement(\"path\", {\n    d: \"M7 10l5 5 5-5z\"\n  }), _react.default.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }));\n};\n/**\n * Autocomplete Search component\n **/\n\n\nvar Search =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Search, _Component);\n\n  _createClass(Search, null, [{\n    key: \"defaultProps\",\n    get: function get() {\n      return {\n        initialSelected: [],\n        placeholder: 'â€” None',\n        NotFoundPlaceholder: 'Please search for some items...',\n        maxSelected: 100,\n        multiple: false\n      };\n    }\n  }, {\n    key: \"propTypes\",\n    get: function get() {\n      return {\n        items: _propTypes.default.arrayOf(_propTypes.default.object).isRequired,\n        initialSelected: _propTypes.default.oneOfType([_propTypes.default.object, _propTypes.default.arrayOf(_propTypes.default.object)]),\n        onItemsChanged: _propTypes.default.func,\n        placeholder: _propTypes.default.string,\n        NotFoundPlaceholder: _propTypes.default.string,\n        maxSelected: _propTypes.default.number,\n        multiple: _propTypes.default.bool,\n        onKeyChange: _propTypes.default.func,\n        getItemsAsync: _propTypes.default.func\n      };\n    }\n  }]);\n\n  function Search(props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Search).call(this, props));\n    _this.state = {\n      menuItems: [],\n      selectedItems: [],\n      searchValue: '',\n      menuVisible: false\n    };\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var initialSelected = this.props.initialSelected;\n\n      if (initialSelected instanceof Array) {\n        this.setSelected(initialSelected);\n      } else {\n        this.addSelected(initialSelected);\n      }\n    }\n  }, {\n    key: \"SearchItemInArrayObjects\",\n    value: function SearchItemInArrayObjects(items, input, searchKey) {\n      var reg = new RegExp(input.split('').join('\\\\w*').replace(/\\W/, ''), 'i');\n      return items.filter(function (item) {\n        if (reg.test(item[searchKey])) {\n          return item;\n        }\n      });\n    }\n  }, {\n    key: \"selectMenuItem\",\n    value: function selectMenuItem(item) {\n      var multiple = this.props.multiple;\n      multiple ? this.addSelected(item) : this.setSelected([item]);\n      this.hideMenu();\n    }\n  }, {\n    key: \"showMenu\",\n    value: function showMenu() {\n      this.setState({\n        menuVisible: true\n      });\n    }\n  }, {\n    key: \"hideMenu\",\n    value: function hideMenu() {\n      this.setState({\n        menuVisible: false\n      });\n    }\n  }, {\n    key: \"triggerItemsChanged\",\n    value: function triggerItemsChanged() {\n      if (this.props.onItemsChanged !== undefined) {\n        this.props.onItemsChanged(this.state.selectedItems);\n      }\n    }\n  }, {\n    key: \"triggerKeyChange\",\n    value: function triggerKeyChange(searchValue) {\n      if (this.props.onKeyChange !== undefined) {\n        this.props.onKeyChange(searchValue);\n      }\n    }\n  }, {\n    key: \"triggerGetItemsAsync\",\n    value: function triggerGetItemsAsync(searchValue) {\n      var _this2 = this;\n\n      if (this.props.getItemsAsync !== undefined) {\n        this.props.getItemsAsync(searchValue, function () {\n          _this2.updateSearchValue(searchValue);\n        });\n      }\n    }\n  }, {\n    key: \"setSelected\",\n    value: function setSelected(selected) {\n      var _this3 = this;\n\n      this.setState({\n        selectedItems: selected\n      }, function () {\n        _this3.triggerItemsChanged();\n      });\n    }\n  }, {\n    key: \"addSelected\",\n    value: function addSelected(selected) {\n      var _this4 = this;\n\n      var items = this.state.selectedItems;\n      items.push(selected);\n      this.setState({\n        selectedItems: items\n      }, function () {\n        _this4.triggerItemsChanged();\n      });\n    }\n  }, {\n    key: \"removeSelected\",\n    value: function removeSelected(itemId) {\n      var _this5 = this;\n\n      var items = this.state.selectedItems;\n      var itemsUpdated = items.filter(function (i) {\n        return i.id != itemId;\n      });\n      this.setState({\n        selectedItems: itemsUpdated\n      }, function () {\n        _this5.triggerItemsChanged();\n      });\n    }\n  }, {\n    key: \"updateSearchValue\",\n    value: function updateSearchValue(value) {\n      var _this6 = this;\n\n      var items = this.props.items;\n      this.setState({\n        searchValue: value\n      }, function () {\n        var menuItems = _this6.SearchItemInArrayObjects(items, _this6.state.searchValue, 'value');\n\n        _this6.setMenuItems(menuItems);\n      });\n    }\n  }, {\n    key: \"showAllMenuItems\",\n    value: function showAllMenuItems() {\n      var items = this.props.items;\n      this.setState({\n        searchValue: ''\n      });\n      var menuItems = this.SearchItemInArrayObjects(items, '', 'value');\n      this.setMenuItems(menuItems);\n    }\n  }, {\n    key: \"setMenuItems\",\n    value: function setMenuItems(items) {\n      var getItemsAsync = this.props.getItemsAsync;\n      this.setState({\n        menuItems: items\n      });\n\n      if (items.length || getItemsAsync != undefined) {\n        this.showMenu();\n      } else {\n        this.hideMenu();\n      }\n    }\n  }, {\n    key: \"itemSelected\",\n    value: function itemSelected(itemId) {\n      var selectedItems = this.state.selectedItems;\n      var item = selectedItems.find(function (s) {\n        return s.id === itemId;\n      });\n      return item != undefined ? true : false;\n    }\n  }, {\n    key: \"focusInput\",\n    value: function focusInput() {\n      var _this7 = this;\n\n      this.showAllMenuItems();\n      _reactDom.default.findDOMNode(this.refs.searchInput).placeholder = '';\n      _reactDom.default.findDOMNode(this.refs.searchInput).value = '';\n      this.blurTimeout = setTimeout(function () {\n        _reactDom.default.findDOMNode(_this7.refs.searchInput).focus();\n      }, 100);\n    }\n  }, {\n    key: \"blurInput\",\n    value: function blurInput() {\n      var _this8 = this;\n\n      this.blurTimeout = setTimeout(function () {\n        _reactDom.default.findDOMNode(_this8.refs.searchInput).blur();\n\n        _this8.hideMenu();\n      }, 100);\n    }\n  }, {\n    key: \"handleRemove\",\n    value: function handleRemove(e, id) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.removeSelected(id);\n    }\n  }, {\n    key: \"handleFocus\",\n    value: function handleFocus(e) {\n      this.focusInput();\n    }\n  }, {\n    key: \"handleBlur\",\n    value: function handleBlur(e) {\n      this.blurInput();\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e) {\n      this.focusInput();\n    }\n  }, {\n    key: \"handleItemClick\",\n    value: function handleItemClick(e) {\n      this.focusInput();\n    }\n  }, {\n    key: \"handleSelect\",\n    value: function handleSelect(e) {\n      var element = e.currentTarget.children[0];\n      var item = {\n        id: parseInt(element.dataset.id),\n        value: element.innerHTML.replace(/&amp;/g, '&')\n      };\n      this.selectMenuItem(item);\n    }\n  }, {\n    key: \"handleKeyChange\",\n    value: function handleKeyChange(e) {\n      var getItemsAsync = this.props.getItemsAsync;\n      var value = this.refs.searchInput.value;\n      this.triggerKeyChange(value);\n\n      if (getItemsAsync != undefined) {\n        this.triggerGetItemsAsync(value);\n      } else {\n        this.updateSearchValue(value);\n      }\n    }\n  }, {\n    key: \"renderMenuItems\",\n    value: function renderMenuItems() {\n      var _this9 = this;\n\n      var _this$state = this.state,\n          menuItems = _this$state.menuItems,\n          selectedItems = _this$state.selectedItems;\n      var NotFoundPlaceholder = this.props.NotFoundPlaceholder;\n\n      if (!menuItems.length) {\n        return _react.default.createElement(ListItem, {\n          style: {\n            color: '#ff6961'\n          }\n        }, _react.default.createElement(\"span\", {\n          \"data-id\": 0\n        }, NotFoundPlaceholder));\n      }\n\n      var items = menuItems.map(function (item, i) {\n        if (_this9.itemSelected(item.id)) {\n          return _react.default.createElement(ListItem, {\n            key: i,\n            style: {\n              color: '#ebebeb'\n            }\n          }, _react.default.createElement(\"span\", {\n            key: i,\n            \"data-id\": item.id,\n            dangerouslySetInnerHTML: {\n              __html: item.value\n            }\n          }));\n        } else {\n          return _react.default.createElement(ListItem, {\n            key: i,\n            onClick: _this9.handleSelect.bind(_this9)\n          }, _react.default.createElement(\"span\", {\n            key: i,\n            \"data-id\": item.id,\n            dangerouslySetInnerHTML: {\n              __html: item.value\n            }\n          }));\n        }\n      });\n      return items;\n    }\n  }, {\n    key: \"renderSelectedItems\",\n    value: function renderSelectedItems() {\n      var _this10 = this;\n\n      var selectedItems = this.state.selectedItems;\n      var _this$props = this.props,\n          multiple = _this$props.multiple,\n          placeholder = _this$props.placeholder;\n      if (!selectedItems.length && multiple) return;\n\n      if (!selectedItems.length && !multiple) {\n        return _react.default.createElement(ListItem, {\n          onClick: this.handleItemClick.bind(this)\n        }, _react.default.createElement(\"span\", {\n          dangerouslySetInnerHTML: {\n            __html: placeholder\n          }\n        }), _react.default.createElement(DropDownIcon, null));\n      }\n\n      var items = selectedItems.map(function (item, i) {\n        return _react.default.createElement(ListItem, {\n          key: i,\n          onClick: _this10.handleItemClick.bind(_this10)\n        }, _react.default.createElement(\"span\", {\n          \"data-id\": item.id,\n          dangerouslySetInnerHTML: {\n            __html: item.value\n          }\n        }), _react.default.createElement(\"svg\", {\n          onClick: function onClick(e) {\n            return _this10.handleRemove(e, item.id);\n          },\n          width: \"18\",\n          height: \"18\",\n          viewBox: \"0 0 24 24\"\n        }, _react.default.createElement(\"g\", {\n          fill: \"currentColor\",\n          fillRule: \"evenodd\"\n        }, _react.default.createElement(\"path\", {\n          d: \"M16.95 5.636l1.414 1.414L7.05 18.364 5.636 16.95z\"\n        }), _react.default.createElement(\"path\", {\n          d: \"M16.95 18.364l1.414-1.414L7.05 5.636 5.636 7.05z\"\n        }))), !multiple && _react.default.createElement(DropDownIcon, null));\n      });\n      return items;\n    }\n  }, {\n    key: \"renderInput\",\n    value: function renderInput() {\n      var _this$props2 = this.props,\n          maxSelected = _this$props2.maxSelected,\n          multiple = _this$props2.multiple;\n      var selectedItems = this.state.selectedItems;\n      var visible = true;\n\n      if (multiple && selectedItems.length >= maxSelected) {\n        visible = false;\n      }\n\n      return _react.default.createElement(Input, {\n        type: \"text\",\n        visible: visible,\n        ref: \"searchInput\",\n        placeholder: this.props.placeholder,\n        onClick: this.handleClick.bind(this),\n        onFocus: this.handleFocus.bind(this),\n        onBlur: this.handleBlur.bind(this),\n        onKeyUp: this.handleKeyChange.bind(this)\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          maxSelected = _this$props3.maxSelected,\n          multiple = _this$props3.multiple;\n      var _this$state2 = this.state,\n          menuVisible = _this$state2.menuVisible,\n          selectedItems = _this$state2.selectedItems;\n      var showMenu = false;\n\n      if (menuVisible && !multiple) {\n        showMenu = true;\n      }\n\n      if (menuVisible && selectedItems.length < maxSelected) {\n        showMenu = true;\n      }\n\n      return _react.default.createElement(Autocomplete, null, _react.default.createElement(List, null, this.renderSelectedItems()), multiple && this.renderInput(), _react.default.createElement(MenuWrapper, null, _react.default.createElement(Menu, {\n        visible: showMenu,\n        ref: \"autocomplete\"\n      }, !multiple && this.renderInput(), _react.default.createElement(List, null, this.renderMenuItems()))));\n    }\n  }]);\n\n  return Search;\n}(_react.Component);\n\nexports.default = Search;\n\nvar Autocomplete = _styledComponents.default.div(_templateObject());\n\nvar Input = _styledComponents.default.input(_templateObject2(), function (props) {\n  return props.visible ? 'block' : 'none';\n});\n\nvar List = _styledComponents.default.ul(_templateObject3());\n\nvar ListItem = _styledComponents.default.li(_templateObject4(), function (props) {\n  return props.selected ? '#ebebeb' : '#fff';\n});\n\nvar MenuWrapper = _styledComponents.default.div(_templateObject5());\n\nvar Menu = _styledComponents.default.div(_templateObject6(), function (props) {\n  return props.visible ? 'visible' : 'hidden';\n});","map":null,"metadata":{},"sourceType":"script"}